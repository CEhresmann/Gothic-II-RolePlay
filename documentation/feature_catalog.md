# Feature Catalog (Серверные механики)

Этот документ описывает ключевые серверные системы и игровые механики проекта.

## 1. Система персонажей (`/Player`)

| Фича | Описание | Ключевые файлы |
|---|---|---|
| **Управление данными** | Отвечает за загрузку, сохранение и представление данных персонажа (статистики, инвентарь). Взаимодействует с БД. | `PlayerRepository.nut`, `PlayerService.nut`, `PlayerEntity.nut` |
| **Контроллер персонажа** | Обрабатывает RPC-вызовы от клиента, связанные с действиями персонажа. | `PlayerController.nut` |
| **Управление предметами** | Логика работы с инвентарем, экипировкой и использованием предметов. | `Item.nut` |

## 2. Система чата (`/Chat`)

| Фича | Описание | Ключевые файлы |
|---|---|---|
| **Обработка сообщений** | Управляет получением сообщений от игроков, определяет тип чата (локальный, глобальный, приватный) и радиус слышимости. | `ChatController.nut`, `ChatService.nut` |
| **Команды чата** | Реализует обработку slash-команд, таких как `/pm` (приватное сообщение). | `Commands/pm.nut` |

## 3. Система фракций (`/Class` и `/System/Factions`)

| Фича | Описание | Ключевые файлы |
|---|---|---|
| **Управление фракциями** | Загружает информацию о доступных фракциях, управляет их состоянием и данными. | `FractionLoader.nut`, `FractionEntity.nut` |
| **Взаимодействие с фракцией** | Предоставляет игрокам возможность вступать во фракции, получать ранги и использовать специфические для фракции возможности. | `FractionController.nut`, `FractionService.nut` |
| **NPC фракций** | Логика для NPC, принадлежащих к определенным фракциям. | `FactionNPC.nut` |
| **Разрешения (Permissions)** | Система, определяющая, какие действия доступны членам фракции в зависимости от их ранга. | `FactionPermissions.nut` |

## 4. Система крафта (`/Craft`)

| Фича | Описание | Ключевые файлы |
|---|---|---|
| **Создание предметов** | Позволяет игрокам создавать новые предметы из материалов по рецептам на специальных станциях (наковальня, котел). | `CraftController.nut`, `CraftService.nut` |
| **Рецепты и станции** | Хранит и управляет рецептами для крафта. | `CraftRepository.nut`, `Shared/Crafts_shared.nut` |

## 5. Система торговли (`/Trade`)

| Фича | Описание | Ключевые файлы |
|---|---|---|
| **Безопасный обмен** | Реализует механику безопасной торговли между двумя игроками, где обе стороны должны подтвердить сделку. | `TradeController.nut`, `TradeService.nut`, `TradeEntity.nut`|

## 6. Повеление не игровых персонажей (`/ai`)

| Фича | Описание | Ключевые файлы |
|---|---|---|
| **Поведение NPC** | Определяет логику поведения для различных типов монстров и NPC (агрессивные, пассивные, животные). | `state.nut`, `update.nut`, `npc/*` |

*(Этот каталог может быть дополнен)*
